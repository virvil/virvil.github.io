<!DOCTYPE HTML>
<html lang="">
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="Hexo">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://yoursite.com">
    <!--SEO-->





<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->


<title>linux完全分布式redis集群安装 | Hexo</title>


    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    

</head>


<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(http://7xpw2b.com1.z0.glb.clouddn.com/hexo-sinppet/img/banner.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='Virvil'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                 <img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://yoursite.com">Hexo</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>Home</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/前端/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/后端/"><i class="fa "></i>后端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/大数据/"><i class="fa "></i>大数据</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/工具/"><i class="fa "></i>工具</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="linux完全分布式redis集群安装">
            
	            linux完全分布式redis集群安装
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/后端">
            后端
        </a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
                    <a href="/tags/redis" title='redis'>
                        redis
                    </a>
                
                    <a href="/tags/集群" title='集群'>
                        集群
                    </a>
                
                    <a href="/tags/完全分布式" title='完全分布式'>
                        完全分布式
                    </a>
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2018/09/09</span>
        </span>
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <h3 id="redis集群安装完成后节点如下：（6主6从）"><a href="#redis集群安装完成后节点如下：（6主6从）" class="headerlink" title="redis集群安装完成后节点如下：（6主6从）"></a>redis集群安装完成后节点如下：（6主6从）</h3><p>192.168.209.128:6001 192.168.209.128:6002 192.168.209.129:6001 192.168.209.129:6002 192.168.209.130:6001 192.168.209.130:6002 192.168.209.128:6003 192.168.209.128:6004 192.168.209.129:6003      192.168.209.129:6004        192.168.209.130:6003      192.168.209.130:6004</p>
<p> //连接客户端</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -c -h ip -p port (例如redis-cli -c -h 192.168.209.128 -p 6001)</span><br></pre></td></tr></table></figure>
<h3 id="redis下载与解压安装（192-168-209-128，192-168-209-129，192-168-209-129上同样操作）"><a href="#redis下载与解压安装（192-168-209-128，192-168-209-129，192-168-209-129上同样操作）" class="headerlink" title="redis下载与解压安装（192.168.209.128，192.168.209.129，192.168.209.129上同样操作）"></a>redis下载与解压安装（192.168.209.128，192.168.209.129，192.168.209.129上同样操作）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line">wget http://download.redis.io/releases/redis-3.2.12.tar.gz		//下载</span><br><span class="line">tar xzf redis-3.2.12.tar.gz		//解压</span><br><span class="line">cd redis-3.2.12</span><br><span class="line">make install		//编译安装</span><br></pre></td></tr></table></figure>
<h3 id="创建存放数据文件"><a href="#创建存放数据文件" class="headerlink" title="创建存放数据文件"></a>创建存放数据文件</h3><p>在每台机器/usr/local下新建redis-cluster文件夹，在redis-cluster文件夹下创建data文件夹和redis6001 ，redis6002 ，redis6003 ， redis6004文件夹。然后再在data文件夹下分别新建6001,6002,6003,6004四个文件，用于存放数据等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir  /usr/local/redis-cluster</span><br><span class="line">cd /usr/local/redis-cluster</span><br><span class="line">mkdir redis6001 redis6002 redis6003 redis6004 		//存放各个节点的配置文件</span><br><span class="line">cd /usr/local/redis-cluster/data</span><br><span class="line">mkdir 6001 6002 6003 6004		//存放各个节点的数据</span><br></pre></td></tr></table></figure>
<h4 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h4><p>将/usr/local/redis-3.2.12下的redis.conf配置文件分别复制到redis600<em>文件夹下，并将redis600</em>下的redis.conf做如下修改（每个redis600*下的redis.conf都需修改）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. daemonize yes</span><br><span class="line">2. port600* （对应每个机器的端口号，在此分别设置为6001，6002，6003，6004）</span><br><span class="line">3. bind 0.0.0.0</span><br><span class="line">4. cluster-enabled yes (开启集群模式)</span><br><span class="line">5. cluster-config-file nodes-600*.conf (最好跟端口号对应，方便识别，在此分别设置为6001，6002，6003，6004)</span><br><span class="line">6. cluster-node-timeout 5000</span><br><span class="line">7. appendonly yes</span><br><span class="line">8. protect-mode no</span><br><span class="line">9.dir /usr/local/redis-cluster/data/6001/ (在此分别设置为6001，6002，6003，6004)</span><br></pre></td></tr></table></figure>
<h3 id="安装ruby"><a href="#安装ruby" class="headerlink" title="安装ruby"></a>安装ruby</h3><p>由于redis集群需要ruby命令，需要安装ruby</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. yum install ruby</span><br><span class="line">2. yum install rubygems</span><br><span class="line">3. gem install redis</span><br></pre></td></tr></table></figure>
<p> ==执行以上命令可能会因为Ruby<em>**</em>版本过低，而执行失败==</p>
<p>ruby版本低</p>
<p>导入public 公钥，命令如下（直接复制即可）</p>
<p>gpg2 –recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3</p>
<p> redis requires Ruby version &gt;= 2.2.2的报错，查了资料发现是Centos默认支持ruby到2.0.0，可gem 安装redis需要最低是2.2.2</p>
<p>解决办法是 先安装rvm，再把ruby版本提升至2.5.1，需要安装如下包</p>
<p>1.安装curl </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install curl</span><br></pre></td></tr></table></figure>
<p> ==可能出现的问题：==</p>
<p>curl: (35) SSL connect error问题处理</p>
<p>无法在服务器使用curl命令访问https域名,原因是nss版本有点旧了，使用以下命令更新一下，重新安装curl即可！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y update nss</span><br></pre></td></tr></table></figure>
<p>2.安装RVM</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -L get.rvm.io | bash -s stable </span><br><span class="line"></span><br><span class="line">source /usr/local/rvm/scripts/rvm</span><br></pre></td></tr></table></figure>
<p>3.查看rvm库中已知的ruby版本，并安装ruby</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rvm list known		//查看rvm库中已知的ruby版本</span><br><span class="line"></span><br><span class="line">rvm install 2.5.1		//安装ruby</span><br><span class="line"></span><br><span class="line">rvm use 2.5.1		//使用一个ruby版本</span><br><span class="line"></span><br><span class="line">ruby --version		//查看当前版本</span><br></pre></td></tr></table></figure>
<p>4.再安装redis就可以了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install redis</span><br></pre></td></tr></table></figure>
<h3 id="在每台机器启动服务器节点"><a href="#在每台机器启动服务器节点" class="headerlink" title="在每台机器启动服务器节点"></a>在每台机器启动服务器节点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/redis-server /usr/local/redis-cluster/redis6001/redis.conf</span><br><span class="line">/usr/local/bin/redis-server /usr/local/redis-cluster/redis6002/redis.conf</span><br><span class="line">/usr/local/bin/redis-server /usr/local/redis-cluster/redis6003/redis.conf</span><br><span class="line">/usr/local/bin/redis-server /usr/local/redis-cluster/redis6004/redis.conf</span><br></pre></td></tr></table></figure>
<h4 id="向集群中添加节点"><a href="#向集群中添加节点" class="headerlink" title="向集群中添加节点"></a>向集群中添加节点</h4><p>（在任一一台机器上执行以下命令即可，（–replicas 1代表一主一从，–replicas 2代表一主两从））</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/redis-3.2.12/src/redis-trib.rb create --replicas 1 192.168.209.128:6001 192.168.209.128:6002 192.168.209.129:6001 192.168.209.129:6002 192.168.209.130:6001 192.168.209.130:6002 192.168.209.128:6003 192.168.209.128:6004 192.168.209.129:6003 192.168.209.129:6004 192.168.209.130:6003 192.168.209.130:6004</span><br></pre></td></tr></table></figure>
<h3 id="连接客户端（以下任一命令执行都可）"><a href="#连接客户端（以下任一命令执行都可）" class="headerlink" title="连接客户端（以下任一命令执行都可）"></a>连接客户端（以下任一命令执行都可）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/redis-cli -c -h 192.168.209.128 -p 6001</span><br><span class="line">/usr/local/bin/redis-cli -c -h 192.168.209.128 -p 6002</span><br><span class="line">/usr/local/bin/redis-cli -c -h 192.168.209.128 -p 6003</span><br><span class="line">/usr/local/bin/redis-cli -c -h 192.168.209.128 -p 6004</span><br></pre></td></tr></table></figure>
<h4 id="关闭某个节点命令"><a href="#关闭某个节点命令" class="headerlink" title="关闭某个节点命令"></a>关闭某个节点命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/redis-cli -c -h 192.168.209.128 -p 6001 shutdown</span><br><span class="line">/usr/local/bin/redis-cli -c -h 192.168.209.128 -p 6002 shutdown</span><br><span class="line">/usr/local/bin/redis-cli -c -h 192.168.209.128 -p 6003 shutdown</span><br><span class="line">/usr/local/bin/redis-cli -c -h 192.168.209.128 -p 6004 shutdown</span><br></pre></td></tr></table></figure>
<h3 id="清空所有节点数据"><a href="#清空所有节点数据" class="headerlink" title="清空所有节点数据"></a>清空所有节点数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 192.168.209.128 -p 6004  -c flushall</span><br><span class="line">redis-cli -h 192.168.209.129 -p 6002  -c flushall</span><br><span class="line">redis-cli -h 192.168.209.130 -p 6001  -c flushall</span><br><span class="line">redis-cli -h 192.168.209.130 -p 6004  -c flushall</span><br><span class="line">redis-cli -h 192.168.209.128 -p 6003  -c flushall</span><br><span class="line">redis-cli -h 192.168.209.130 -p 6002  -c flushall</span><br><span class="line">redis-cli -h 192.168.209.128 -p 6001  -c flushall</span><br><span class="line">redis-cli -h 192.168.209.129 -p 6003  -c flushall</span><br><span class="line">redis-cli -h 192.168.209.129 -p 6001  -c flushall</span><br><span class="line">redis-cli -h 192.168.209.130 -p 6003  -c flushall</span><br><span class="line">redis-cli -h 192.168.209.129 -p 6004  -c flushall</span><br><span class="line">redis-cli -h 192.168.209.128 -p 6002  -c flushall</span><br></pre></td></tr></table></figure>
<h3 id="免密登录（可有可无）"><a href="#免密登录（可有可无）" class="headerlink" title="免密登录（可有可无）"></a>免密登录（可有可无）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line">ssh-copy-id -i /root/.ssh/id_rsa.pub root@192.168.209.128</span><br><span class="line">ssh 192.168.209.128</span><br></pre></td></tr></table></figure>
<h3 id="如果redis集群启动失败，（将-usr-local-redis-cluster-data下的文件都删除然后用一下方法进行测试）："><a href="#如果redis集群启动失败，（将-usr-local-redis-cluster-data下的文件都删除然后用一下方法进行测试）：" class="headerlink" title="如果redis集群启动失败，（将/usr/local/redis-cluster/data下的文件都删除然后用一下方法进行测试）："></a>如果redis集群启动失败，（将/usr/local/redis-cluster/data下的文件都删除然后用一下方法进行测试）：</h3><h4 id="安装telnet"><a href="#安装telnet" class="headerlink" title="安装telnet"></a>安装telnet</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install telnet-server</span><br><span class="line">yum install telnet.*</span><br></pre></td></tr></table></figure>
<h4 id="测试连接（一定得测通）"><a href="#测试连接（一定得测通）" class="headerlink" title="测试连接（一定得测通）"></a>测试连接（一定得测通）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet ip port //测试连接（例如：telnet 192.168.209.128 6001）</span><br></pre></td></tr></table></figure>
<h4 id="如何测不通，有如下两种解决方案，关闭防火墙，或者打开端口"><a href="#如何测不通，有如下两种解决方案，关闭防火墙，或者打开端口" class="headerlink" title="如何测不通，有如下两种解决方案，关闭防火墙，或者打开端口"></a>如何测不通，有如下两种解决方案，关闭防火墙，或者打开端口</h4><h5 id="1-关闭防火墙"><a href="#1-关闭防火墙" class="headerlink" title="1.关闭防火墙"></a>1.关闭防火墙</h5><p>service iptables status        //查看防火墙状态</p>
<p>service iptables stop         //关掉防火墙则所有端口都默认开放</p>
<h5 id="2-打开端口"><a href="#2-打开端口" class="headerlink" title="2.打开端口"></a>2.打开端口</h5><p>端口管理#开启6001端口（redis有个不成文规则，开启6001端口，就必须开启16001端口，即在原有端口+10000）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/sbin/iptables -I INPUT -p tcp --dport 6001 -j ACCEPT </span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 6002 -j ACCEPT </span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 6003 -j ACCEPT </span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 6004 -j ACCEPT</span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 16001 -j ACCEPT </span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 16002 -j ACCEPT</span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 16003 -j ACCEPT </span><br><span class="line">/sbin/iptables -I INPUT -p tcp --dport 16004 -j ACCEPT</span><br><span class="line">/etc/rc.d/init.d/iptables save #保存配置 </span><br><span class="line">/etc/rc.d/init.d/iptables restart #重启服务 </span><br><span class="line">查看已开放端口 </span><br><span class="line">/etc/init.d/iptables status</span><br></pre></td></tr></table></figure>
<p>如果以上都没问题，则重新执行以下命令即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//在每台机器启动服务器节点</span><br><span class="line">/usr/local/bin/redis-server /usr/local/redis-cluster/redis6001/redis.conf</span><br><span class="line">/usr/local/bin/redis-server /usr/local/redis-cluster/redis6002/redis.conf</span><br><span class="line">/usr/local/bin/redis-server /usr/local/redis-cluster/redis6003/redis.conf</span><br><span class="line">/usr/local/bin/redis-server /usr/local/redis-cluster/redis6004/redis.conf</span><br><span class="line">//远程集群中添加节点（在任一一台机器上执行以下命令即可，（--replicas 1代表一主一从，--replicas 2代表一主两从））</span><br><span class="line">/usr/local/redis-3.2.12/src/redis-trib.rb create --replicas 1 192.168.209.128:6001 192.168.209.128:6002 192.168.209.129:6001 192.168.209.129:6002 192.168.209.130:6001 192.168.209.130:6002 192.168.209.128:6003 192.168.209.128:6004 192.168.209.129:6003 192.168.209.129:6004 192.168.209.130:6003 192.168.209.130:6004</span><br></pre></td></tr></table></figure>

    </div>

    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="https://virvil.github.io/" target="_blank">virvil的博客</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2018/09/10/JWT（JSON-WEB-TOKENS）的使用，无状态token机制/" class="pre-post btn btn-default" title='JWT（JSON WEB TOKENS）的使用，无状态token机制'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">JWT（JSON WEB TOKENS）的使用，无状态token机制</span>
        </a>
    
    
        <a href="/2018/09/08/hadoop/" class="next-post btn btn-default" title='hadoop'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">hadoop</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
    
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: 'xOKV9J4UeQAtVkvnJC7Kq2Jn-gzGzoHsz',
            appKey: 'erIpQac4azoCmgfBB7Dl9maa',
            placeholder: '说点什么吧',
            notify: false,
            verify: false,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: ''.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">Table of Contents</h3>
        
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#redis集群安装完成后节点如下：（6主6从）"><span class="toc-text">redis集群安装完成后节点如下：（6主6从）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis下载与解压安装（192-168-209-128，192-168-209-129，192-168-209-129上同样操作）"><span class="toc-text">redis下载与解压安装（192.168.209.128，192.168.209.129，192.168.209.129上同样操作）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建存放数据文件"><span class="toc-text">创建存放数据文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#修改配置文件"><span class="toc-text">修改配置文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装ruby"><span class="toc-text">安装ruby</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在每台机器启动服务器节点"><span class="toc-text">在每台机器启动服务器节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#向集群中添加节点"><span class="toc-text">向集群中添加节点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#连接客户端（以下任一命令执行都可）"><span class="toc-text">连接客户端（以下任一命令执行都可）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#关闭某个节点命令"><span class="toc-text">关闭某个节点命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#清空所有节点数据"><span class="toc-text">清空所有节点数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#免密登录（可有可无）"><span class="toc-text">免密登录（可有可无）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如果redis集群启动失败，（将-usr-local-redis-cluster-data下的文件都删除然后用一下方法进行测试）："><span class="toc-text">如果redis集群启动失败，（将/usr/local/redis-cluster/data下的文件都删除然后用一下方法进行测试）：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#安装telnet"><span class="toc-text">安装telnet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#测试连接（一定得测通）"><span class="toc-text">测试连接（一定得测通）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#如何测不通，有如下两种解决方案，关闭防火墙，或者打开端口"><span class="toc-text">如何测不通，有如下两种解决方案，关闭防火墙，或者打开端口</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-关闭防火墙"><span class="toc-text">1.关闭防火墙</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-打开端口"><span class="toc-text">2.打开端口</span></a></li></ol></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2017
                </span> | 
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> | 
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



<script src="/js/app.js?rev=@@hash"></script>



</body>
</html>